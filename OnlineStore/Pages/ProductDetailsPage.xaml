<Page x:Class="OnlineStore.Pages.ProductDetailsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:OnlineStore.Pages"
      mc:Ignorable="d" 
      d:DesignHeight="450" d:DesignWidth="800"
      Title="ProductDetailsPage">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Кнопка "Назад" -->
            <RowDefinition Height="250"/>
            <!-- Изображение и информация -->
            <RowDefinition Height="Auto"/>
            <!-- Заголовок "Описание" -->
            <RowDefinition Height="*"/>
            <!-- Описание с прокруткой -->
            <RowDefinition Height="80"/>
            <!-- Крупные кнопки -->
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>

        <!-- Кнопка "Назад" -->
        <Button x:Name="btnBack" Content="Назад" 
            Grid.Row="0" Grid.Column="0" 
            FontSize="14" Padding="10,5"
            Click="btnBack_Click"/>

        <!-- Изображение товара -->
        <Image Source="{Binding CurrentProduct.ImageURL}" 
           Grid.Row="1" Grid.Column="0" 
           Margin="10" Stretch="Uniform"/>

        <!-- Информация о товаре -->
        <StackPanel Grid.Row="1" Grid.Column="1" Margin="10">
            <TextBlock Text="{Binding CurrentProduct.Name}" 
                   FontSize="24" FontWeight="Bold"/>
            <TextBlock Text="{Binding CurrentProduct.Price, StringFormat=C}" 
                   FontSize="18" Margin="0,10,0,0"/>
            <TextBlock Text="{Binding CurrentProduct.StockQuantity, StringFormat='В наличии: {0}'}" 
                   Margin="0,5,0,0"/>
            <TextBlock Text="{Binding CurrentProduct.AverageRating, StringFormat='Рейтинг: {0:F1}/5'}" 
                   Margin="0,5,0,0"/>
            <TextBlock Text="{Binding CategoryName, StringFormat='Категория: {0}'}" 
                   Margin="0,5,0,0"/>
        </StackPanel>

        <!-- Заголовок "Описание" -->
        <TextBlock Text="Описание:" 
               Grid.Row="2" Grid.Column="0" 
               VerticalAlignment="Center"/>

        <!-- Прокручиваемое описание -->
        <ScrollViewer Grid.Row="3" Grid.ColumnSpan="2" 
                  Margin="10" VerticalScrollBarVisibility="Auto">
            <TextBlock Text="{Binding CurrentProduct.Description}" 
                   TextWrapping="Wrap" FontSize="14"/>
        </ScrollViewer>

        <!-- Крупные кнопки действий -->
        <StackPanel Grid.Row="4" Grid.ColumnSpan="2" 
                Orientation="Horizontal" 
                HorizontalAlignment="Center"
                VerticalAlignment="Center">
            <Button x:Name="btnAddToCart" Content="В корзину" 
                Width="160" Height="40" Margin="5"
                FontSize="14"
                Click="btnAddToCart_Click"/>

            <Button x:Name="btnViewReviews" Content="Отзывы" 
                Width="160" Height="40" Margin="5"
                FontSize="14"
                Click="btnViewReviews_Click"/>

            <Button x:Name="btnAddReview" Content="Добавить отзыв" 
                Width="160" Height="40" Margin="5"
                FontSize="14" 
                Click="btnAddReview_Click"/>
        </StackPanel>
    </Grid>
</Page>
